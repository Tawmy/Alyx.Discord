services:
  db:
    labels:
      - dev.orbstack.domains=db.alyx.discord.local

  bot:
    image: alyx.discord
    build:
      context: .
      dockerfile: Alyx.Discord.Api/Dockerfile
    environment:
      DEBUG_GUILD_ID: 1284800895967559711
      STATUS_MESSAGE: "I'm in development!"
      DATA_PROTECTION_CERTIFICATE: /mnt/cert/alyx-discord
      AUTH_AUTHORITY: https://auth.tawmy.dev/realms/xiv
      AUTH_AUDIENCE: alyx-discord
      NETSTONE_API_ROOT_URI: https://api.netstone.tawmy.dev
      NETSTONE_API_AUTHORITY: https://auth.tawmy.dev/realms/xiv
      NETSTONE_API_SCOPES: basic
      NETSTONE_API_CLIENT_ID: alyx-discord
    volumes:
      - /Users/tawmy/Desktop/cert/alyx-discord:/mnt/cert
    labels:
      - dev.orbstack.domains=alyx.discord.local
    ports:
      - "8086:8080"

volumes:
  postgres_data:
    name: alyx-postgres